<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.exampleliqubase.dao.SubscriberMapper" >
    <resultMap id="subscriber" type="com.example.exampleliqubase.model.SubscriberEntity" >
        <id property="id" column="id"/>
        <result property="name" column="name"/>

    <association
              property="tariff"  column="ref_tariff"
              javaType="com.example.exampleliqubase.model.TariffEntity"
              select="com.example.exampleliqubase.dao.TariffMapper.getTariffById"
              fetchType="eager"/>



      <collection
              property="payments" column="id"
              javaType="List" ofType="PaymentEntity"
              select="com.example.exampleliqubase.dao.PaymentMapper.getPaymentsByIdSub"
              fetchType="eager"
      />

  </resultMap>


  <select id="getSubscriberById" parameterType="java.lang.Integer"
           resultMap="subscriber">
      select * from subscriber where id = #{id}
  </select>


    <!-- <select id="getSubscribers" resultMap="tariff">
         select * from subscriber
     </select>
     -->


 </mapper>